<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Class to encapsulate filtered datasets — FilteredData • teal</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Class to encapsulate filtered datasets — FilteredData" />
<meta property="og:description" content="Class to encapsulate filtered datasets
Class to encapsulate filtered datasets" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">teal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/data_connector_class.html">DataConnector Class</a>
    </li>
    <li>
      <a href="../articles/developer_apps.html">Developer Apps</a>
    </li>
    <li>
      <a href="../articles/getting_started.html">Getting Started with Teal</a>
    </li>
    <li>
      <a href="../articles/teal_desiderata.html">Teal Desiderata</a>
    </li>
    <li>
      <a href="../articles/teal_design_and_implementation.html">Teal Design and Implementation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<!-- start_releases -->
<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
Other releases
<span class="caret"></span></a><ul class="dropdown-menu" role="menu">
   <li><a href="../../index.html">latest</a></li>
   <li><a href="../../v0.9.5/index.html">v0.9.5</a></li>
   <li><a href="../../v0.9.4/index.html">v0.9.4</a></li>
   <li><a href="../../v0.9.3/index.html">v0.9.3</a></li>
   <li><a href="../../v0.9.2/index.html">v0.9.2</a></li>
   <li><a href="../../v0.9.1/index.html">v0.9.1</a></li>
   <li><a href="../../v0.9.0/index.html">v0.9.0</a></li>
   <li><a href="../../v0.8.5/index.html">v0.8.5</a></li>
   <li><a href="../../v0.8.4/index.html">v0.8.4</a></li>
   <li><a href="../../v0.8.3/index.html">v0.8.3</a></li>
   <li><a href="../../v0.8.2/index.html">v0.8.2</a></li>
   <li><a href="../../v0.7.0/index.html">v0.7.0</a></li>
   <li><a href="../../v0.6.0/index.html">v0.6.0</a></li>
   <li><a href="../../v0.0.5/index.html">v0.0.5</a></li>
   <li><a href="../../v0.0.4/index.html">v0.0.4</a></li>
   <li><a href="../../v0.0.3/index.html">v0.0.3</a></li>
   <li><a href="../../v0.0.2/index.html">v0.0.2</a></li>
   <li><a href="../../v0.0.1/index.html">v0.0.1</a></li>
</ul></li>
<!-- end_releases -->
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.roche.com/NEST/teal">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Class to encapsulate filtered datasets</h1>
    
    <div class="hidden name"><code>FilteredData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Class to encapsulate filtered datasets</p>
<p>Class to encapsulate filtered datasets</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The main purpose of this class is to provide a collection of reactive datasets,
each of which can be filtered through the right filter panel of teal apps.
For each dataset, <code>get_filter_expr</code> returns the call to filter the dataset according
to the UI user selection.
Other classes then take care of actually merging together all the datasets.</p>
<p>This class is <code>ADSL</code>-centric in the sense that <code>ADSL</code> is required to apply the filters.
Every dataset, in addition to its own filter, is filtered to make sure that it only
contains keys present in <code>ADSL</code> (defaulting to <code>(USUBJID, STUDYID)</code>).
Once the <code>ADSL</code> dataset is set, the filters are applied.</p>
<p>The datasets are filtered lazily, i.e. only when requested / needed in the Shiny app.</p>
<p>By the design of the class (and <code>reactiveValues</code>), any dataname set through <code>set_data</code>
cannot be removed because other code may already depend on it. As a workaround, the
underlying data can be set to <code>NULL</code>.</p>
<p>The class currently supports variables of the following types within datasets:</p><ul>
<li><p><code>choices</code>: variable of type <code>factor</code>, e.g. <code>ADSL$COUNTRY</code>
zero or more options can be selected, when the variable is a factor</p></li>
<li><p><code>logical</code>: variable of type <code>logical</code>, e.g. <code>ADSL$TRT_FLAG</code>
exactly one option must be selected, <code>TRUE</code> or <code>FALSE</code></p></li>
<li><p><code>ranges</code>: variable of type <code>numeric</code>, e.g. <code>ADSL$AGE</code>
numerical range, a range within this range can be selected
Other variables cannot be filtered for.</p></li>
</ul>

<p>Common arguments are:</p><ol>
<li><p><code>filtered</code>: filtered dataset or not</p></li>
<li><p><code>dataname</code>: one of the datasets</p></li>
<li><p><code>varname</code>: one of the columns in a dataset</p></li>
</ol>

    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>FilteredData$new()</code></a></p></li>
<li><p><a href='#method-datanames'><code>FilteredData$datanames()</code></a></p></li>
<li><p><a href='#method-get_data'><code>FilteredData$get_data()</code></a></p></li>
<li><p><a href='#method-set_data'><code>FilteredData$set_data()</code></a></p></li>
<li><p><a href='#method-get_code'><code>FilteredData$get_code()</code></a></p></li>
<li><p><a href='#method-set_code'><code>FilteredData$set_code()</code></a></p></li>
<li><p><a href='#method-get_data_attr'><code>FilteredData$get_data_attr()</code></a></p></li>
<li><p><a href='#method-set_data_attr'><code>FilteredData$set_data_attr()</code></a></p></li>
<li><p><a href='#method-get_variable_labels'><code>FilteredData$get_variable_labels()</code></a></p></li>
<li><p><a href='#method-get_keys'><code>FilteredData$get_keys()</code></a></p></li>
<li><p><a href='#method-get_datalabel'><code>FilteredData$get_datalabel()</code></a></p></li>
<li><p><a href='#method-get_filter_info'><code>FilteredData$get_filter_info()</code></a></p></li>
<li><p><a href='#method-get_filter_type'><code>FilteredData$get_filter_type()</code></a></p></li>
<li><p><a href='#method-get_filter_state'><code>FilteredData$get_filter_state()</code></a></p></li>
<li><p><a href='#method-set_filter_state'><code>FilteredData$set_filter_state()</code></a></p></li>
<li><p><a href='#method-get_default_filter_state'><code>FilteredData$get_default_filter_state()</code></a></p></li>
<li><p><a href='#method-is_filterable'><code>FilteredData$is_filterable()</code></a></p></li>
<li><p><a href='#method-get_filter_expr'><code>FilteredData$get_filter_expr()</code></a></p></li>
<li><p><a href='#method-print'><code>FilteredData$print()</code></a></p></li>
<li><p><a href='#method-print_filter_info'><code>FilteredData$print_filter_info()</code></a></p></li>
<li><p><a href='#method-get_data_info'><code>FilteredData$get_data_info()</code></a></p></li>
<li><p><a href='#method-get_bookmark_state'><code>FilteredData$get_bookmark_state()</code></a></p></li>
<li><p><a href='#method-restore_state_from_bookmark'><code>FilteredData$restore_state_from_bookmark()</code></a></p></li>
<li><p><a href='#method-clone'><code>FilteredData$clone()</code></a></p></li>
</ul>
<p><hr>
<a id="method-new"></a></p><h3>Method <code>new()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$new()</pre><p></div></p>

<h3>Details</h3>
<p>Initialize a FilteredData object</p>

<p><hr>
<a id="method-datanames"></a></p><h3>Method <code>datanames()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$datanames()</pre><p></div></p>

<h3>Details</h3>
<p>Get datanames, ADSL appears first</p>

<h3>Returns</h3>
<p><code>character</code> vector of datanames</p>
<p><hr>
<a id="method-get_data"></a></p><h3>Method <code>get_data()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_data(dataname, filtered = TRUE)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>filtered</code></dt><dd><p><code>logical</code> whether to return filtered or unfiltered dataset</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get filtered or unfiltered dataset</p>
<p>For <code>filtered = FALSE</code>, the original data set with
<code>set_data</code> is returned including all attributes.</p>

<p><hr>
<a id="method-set_data"></a></p><h3>Method <code>set_data()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$set_data(dataname, data)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset, without spaces</p></dd>

<dt><code>data</code></dt><dd><p><code>data.frame</code> data that corresponds to <code>dataname</code></p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Add data</p>
<p>Will also add the <code>md5</code> sum of the data.</p>
<p>Note: due to the nature of <code>reactiveValues()</code>, once a dataname
is added, it cannot be removed anymore because some code may depend
on it. You can try to achieve this by setting the data to NULL
and the observers must then know that NULL means that the dataset
was removed.</p>
<p>Any attributes attached to the data are kept in the unfiltered data.</p>

<h3>Returns</h3>
<p><code>self</code> object of this class</p>
<p><hr>
<a id="method-get_code"></a></p><h3>Method <code><a href='get_code.html'>get_code()</a></code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_code(dataname = self$datanames())</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name(s) of dataset(s)</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get the R preprocessing code string that generates the unfiltered datasets</p>

<h3>Returns</h3>
<p><code>character</code> deparsed code</p>
<p><hr>
<a id="method-set_code"></a></p><h3>Method <code>set_code()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$set_code(code)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>code</code></dt><dd><p><code>CodeClass</code> preprocessing code that can be parsed to generate the
unfiltered datasets</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Set the R preprocessing code for single dataset</p>

<h3>Returns</h3>
<p><code>self</code></p>
<p><hr>
<a id="method-get_data_attr"></a></p><h3>Method <code>get_data_attr()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_data_attr(dataname, attr)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>attr</code></dt><dd><p><code>character</code> attribute to get from the data attributes of the dataset</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get data attribute for the dataset</p>
<p>sets and gets the data attribute on unfiltered data as it is never modified
as attributes</p>

<h3>Returns</h3>
<p>value of attribute, may be NULL if it does not exist</p>
<p><hr>
<a id="method-set_data_attr"></a></p><h3>Method <code>set_data_attr()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$set_data_attr(dataname, attr, value)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>attr</code></dt><dd><p>attribute to get from the data attributes of the dataset</p></dd>

<dt><code>value</code></dt><dd><p>value to set attribute to</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Set data attribute for the dataset</p>

<h3>Returns</h3>
<p><code>self</code> for chaining</p>
<p><hr>
<a id="method-get_variable_labels"></a></p><h3>Method <code><a href='get_variable_labels.html'>get_variable_labels()</a></code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_variable_labels(dataname, variables = NULL)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>variables</code></dt><dd><p>(<code>character</code> vector) variables to get labels for;
if <code>NULL</code>, for all variables in data</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get labels of variables in the data</p>
<p>Variables are the column names of the data.
Either, all labels must have been provided for all variables
in <code>set_data</code> or <code>NULL</code>.</p>

<h3>Returns</h3>
<p><code>character or NULL</code> variable labels, <code>NULL</code> if <code>column_labels</code>
attribute does not exist for the data
Get keys for the dataset</p>
<p><hr>
<a id="method-get_keys"></a></p><h3>Method <code>get_keys()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_keys(dataname)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p><code>character</code> keys of dataset
Get data label for the dataset</p>
<p>Useful to display in <code>Show R Code</code>.</p>
<p><hr>
<a id="method-get_datalabel"></a></p><h3>Method <code>get_datalabel()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_datalabel(dataname)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p><code>character</code> keys of dataset</p>
<p><hr>
<a id="method-get_filter_info"></a></p><h3>Method <code>get_filter_info()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_filter_info(dataname, varname = NULL, all_vars = FALSE)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>varname</code></dt><dd><p><code>character</code> column within the dataset,
if <code>NULL</code>, return all (filtered) variables</p></dd>

<dt><code>all_vars</code></dt><dd><p><code>logical</code> (only applies if <code>varname</code> is NULL)
whether to include non-filtered variables; attention: only
filterable variables are included</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Return filter characteristics for a variable in a dataset
e.g. <code>range</code> for a <code>numeric</code> variable, <code>choices</code> for a
<code>factor</code> variable, <code>logical</code> for a <code>logical</code> variable.</p>
<p>This can be used to see how the variable must be filtered.</p>

<p><hr>
<a id="method-get_filter_type"></a></p><h3>Method <code>get_filter_type()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_filter_type(dataname, varname)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>varname</code></dt><dd><p><code>character</code> column within the dataset,
must be provided</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>See <code>get_filter_info</code>, only returns filter type (<code>choices</code>, <code>range</code>, <code>logical</code>).</p>

<h3>Returns</h3>
<p><code>character</code> filter type</p>
<p><hr>
<a id="method-get_filter_state"></a></p><h3>Method <code>get_filter_state()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_filter_state(dataname, varname = NULL)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>varname</code></dt><dd><p><code>character</code> column within the dataset;
if <code>NULL</code>, return all variables in a list</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Filter state for a dataset (or only a variable within it).</p>

<h3>Returns</h3>
<p><code>character vector</code> filter state or list of these</p>
<p><hr>
<a id="method-set_filter_state"></a></p><h3>Method <code>set_filter_state()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$set_filter_state(dataname, state, remove_omitted = FALSE)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset to set filter state for</p></dd>

<dt><code>state</code></dt><dd><p><code>named list</code> of new state to set; for each <code>varname</code>,
<code>state[[varname]]</code> is the new state to set for <code>varname</code></p></dd>

<dt><code>remove_omitted</code></dt><dd><p><code>logical</code> whether to remove the filters for the
variables that are not present in the named list <code>state</code></p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Set the filter state for a dataname</p>
<p>The state is only updated and triggers reactive behavior when it actually
changes.</p>
<p>To set a state for a single variable, you can write:
<code>set_filter_state(dataname, setNames(list(single_state), varname))</code>
or use the wrapper function <code>set_single_filter_state</code>.
To remove a filter for a variable, pass in <code>NULL</code>, e.g.
<code>state = list(SEX = NULL, ..)</code>.
To remove all filters for a dataset, call
<code>set_filter_state(dataname, state = list(), remove_omitted = FALSE)</code>.</p>

<h3>Returns</h3>
<p><code>logical</code> if the state for the <code>dataname</code> was changed</p>
<p><hr>
<a id="method-get_default_filter_state"></a></p><h3>Method <code>get_default_filter_state()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_default_filter_state(dataname, varname)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>varname</code></dt><dd><p><code>character</code> column within the dataset;
must be provided</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get the default filter state (useful for initial UI state)
This is different to NULL state which means no filter applied.
Instead, this filter is a sensible default, e.g. filter out NAs.
for numerics, full range; for factors, all choices etc.</p>

<h3>Returns</h3>
<p><code>character vector</code> default filter state for this variable</p>
<p><hr>
<a id="method-is_filterable"></a></p><h3>Method <code>is_filterable()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$is_filterable(dataname, varname)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>varname</code></dt><dd><p><code>character</code> column within the dataset;
must be provided</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Check whether the variable can be filtered, i.e. not of unknown type</p>

<h3>Returns</h3>
<p>whether the variable can be filtered (type not unknown)</p>
<p><hr>
<a id="method-get_filter_expr"></a></p><h3>Method <code>get_filter_expr()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_filter_expr(dataname)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get the call to filter the dataset according to the filter state</p>
<p>This can be used for the <code>Show R Code</code> generation.</p>
<p>When the dataname is <code>ADSL</code>, it is simply the filtered <code>ADSL</code>.
Otherwise, it is the filtered dataset that only contains subjects which
are also in the filtered <code>ADSL</code>.</p>
<p>Note: The <code><a href='https://dplyr.tidyverse.org/reference/join.html'>dplyr::inner_join()</a></code> function in returned call will fail if the
corresponding dataset is NULL.</p>
<p>For the return type, note that <code><a href='https://rlang.r-lib.org/reference/is_expression.html'>rlang::is_expression</a></code> returns <code>TRUE</code> on the
return type, both for base R expressions and calls (single expression,
capturing a function call).</p>

<h3>Returns</h3>
<p><code>expression</code> to filter dataset (taking out patients not in <code>ADSL</code>)</p>
<p><hr>
<a id="method-print"></a></p><h3>Method <code><a href='https://rdrr.io/r/base/print.html'>print()</a></code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$print(...)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>...</code></dt><dd><p>unused arguments</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Print method</p>
<p>To obtain the default printing of R6 objects with method listing,
use <code><a href='https://rdrr.io/r/base/cat.html'>cat(format(x))</a></code>.</p>

<p><hr>
<a id="method-print_filter_info"></a></p><h3>Method <code>print_filter_info()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$print_filter_info(
  dataname,
  filtered_vars_only = FALSE,
  variables = NULL
)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>filtered_vars_only</code></dt><dd><p><code>logical</code> whether to only consider filtered
vars or unfiltered as well</p></dd>

<dt><code>variables</code></dt><dd><p>(<code>character</code> vector) variables to consider; if NULL, takes all</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Prints filter characteristics of each variable for a given dataset to the
console.</p>

<h3>Returns</h3>
<p><code>NULL</code>, only prints</p>
<p><hr>
<a id="method-get_data_info"></a></p><h3>Method <code>get_data_info()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_data_info(dataname, filtered)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>filtered</code></dt><dd><p><code>logical</code> whether to obtain this info for the
filtered dataset</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get info about dataname, e.g. dimensions and
number of patients (in long datasets different from ADSL,
a patient can occur in zero or more rows)</p>

<h3>Returns</h3>
<p>a list with names <code>dim, patients</code>
Returns the state to be bookmarked</p>
<p><code>md5</code> sums of <code>datasets</code>, <code>filter_states</code> and <code>preproc_code</code> are bookmarked.</p>
<p><hr>
<a id="method-get_bookmark_state"></a></p><h3>Method <code>get_bookmark_state()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$get_bookmark_state()</pre><p></div></p>

<h3>Returns</h3>
<p>named list
Set this object from a bookmarked state</p>
<p>Only sets the filter state, does not set the data
and the preprocessing code.
Also checks the preprocessing code is identical if provided in the <code>state</code>.</p>
<p>Since this function is used from the end-user part, its error messages
are more verbose. We don't call the Shiny modals from here because this
class may be used outside of a Shiny app.</p>
<p><hr>
<a id="method-restore_state_from_bookmark"></a></p><h3>Method <code>restore_state_from_bookmark()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$restore_state_from_bookmark(state, check_data_md5sums = TRUE)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>state</code></dt><dd><p><code>list</code> containing fields <code>data_md5sums</code>, <code>filter_states</code>
and <code>preproc_code</code>.</p></dd>

<dt><code>check_data_md5sums</code></dt><dd><p><code>logical</code> whether to check that <code>md5sums</code> agree
for the data; may not make sense with randomly generated data per session</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h3>Usage</h3>
<p><div class="r"></p><pre>FilteredData$clone(deep = FALSE)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl class='dl-horizontal'>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>random.cdisc.data</span>)

<span class='no'>ADSL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radsl.html'>radsl</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span>(<span class='no'>ADSL</span>, <span class='st'>"keys"</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='get_cdisc_keys.html'>get_cdisc_keys</a></span>(<span class='st'>"ADSL"</span>)
<span class='no'>datasets</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>teal</span><span class='kw ns'>:::</span><span class='no'><a href='https://rdrr.io/pkg/teal/man/FilteredData.html'>FilteredData</a></span>$<span class='fu'>new</span>()

<span class='co'># to avoid using isolate(), you can provide a default isolate context by calling</span>
<span class='co'># options(shiny.suppressMissingContextError = TRUE) #nolint</span>
<span class='co'># don't forget to deactivate this option at the end</span>
<span class='co'># options(shiny.suppressMissingContextError = FALSE) #nolint</span>

<span class='fu'>isolate</span>({
  <span class='no'>datasets</span>

  <span class='no'>datasets</span>$<span class='fu'>set_data</span>(<span class='st'>"ADSL"</span>, <span class='no'>ADSL</span>)
  <span class='no'>datasets</span>

  <span class='no'>datasets</span>$<span class='fu'>datanames</span>()
  <span class='no'>datasets</span>$<span class='fu'>get_data_info</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='co'># filters dataset to obtain information</span>
  <span class='no'>datasets</span>$<span class='fu'>get_data_info</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
  <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>)
  <span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>datasets</span>$<span class='fu'>get_data</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='co'># df</span>

  <span class='no'>datasets</span>$<span class='fu'>get_filter_type</span>(<span class='st'>"ADSL"</span>, <span class='st'>"SEX"</span>)
  <span class='no'>datasets</span>$<span class='fu'>set_filter_state</span>(<span class='st'>"ADSL"</span>, <span class='kw'>state</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='kw'>AGE</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>33</span>, <span class='fl'>44</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>),
    <span class='kw'>SEX</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>choices</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"M"</span>, <span class='st'>"F"</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  ))
  <span class='no'>datasets</span>
  <span class='no'>datasets</span>$<span class='fu'>get_filter_type</span>(<span class='st'>"ADSL"</span>, <span class='st'>"SEX"</span>)
  <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>)<span class='kw'>[[</span><span class='st'>"SEX"</span>]]$<span class='no'>type</span>

  <span class='co'># will fail because of invalid range</span>
  <span class='co'># datasets$set_filter_state("ADSL", list(</span>
  <span class='co'>#   AGE = list(range = c(3, 7), keep_na = FALSE)</span>
  <span class='co'># ))</span>
  <span class='no'>datasets</span>$<span class='fu'>set_filter_state</span>(<span class='st'>"ADSL"</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='kw'>AGE</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>33</span>, <span class='fl'>44</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  ))
  <span class='co'># wrapper functions</span>
  <span class='kw pkg'>teal</span><span class='kw ns'>:::</span><span class='fu'><a href='https://rdrr.io/pkg/teal/man/set_single_filter_state.html'>set_single_filter_state</a></span>(<span class='no'>datasets</span>, <span class='st'>"ADSL"</span>, <span class='st'>"AGE"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>35</span>, <span class='fl'>42</span>))
  <span class='kw pkg'>teal</span><span class='kw ns'>:::</span><span class='fu'><a href='https://rdrr.io/pkg/teal/man/set_single_filter_state.html'>set_single_filter_state</a></span>(
    <span class='no'>datasets</span>, <span class='st'>"ADSL"</span>, <span class='st'>"AGE"</span>,
    <span class='kw'>state</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>33</span>, <span class='fl'>44</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  )
  <span class='no'>datasets</span>$<span class='fu'>set_filter_state</span>(
    <span class='st'>"ADSL"</span>,
    <span class='kw'>state</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
      <span class='kw'>SEX</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>choices</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"M"</span>, <span class='st'>"F"</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
    )
  )
  <span class='no'>datasets</span>$<span class='fu'>get_filter_type</span>(<span class='st'>"ADSL"</span>, <span class='st'>"SEX"</span>)

  <span class='no'>datasets</span>$<span class='fu'>get_filter_state</span>(<span class='st'>"ADSL"</span>)

  <span class='no'>datasets</span>$<span class='fu'>print_filter_info</span>(<span class='st'>"ADSL"</span>)
})</div><div class='output co'>#&gt; |################################################# Refiltering dataset  ADSL
#&gt; |variable 'RANDDT' is of class 'Date' which has currently no filter UI element
#&gt; |variable 'TRTSDTM' is of class 'POSIXct, POSIXt' which has currently no filter UI element
#&gt; |variable 'TRTEDTM' is of class 'POSIXct, POSIXt' which has currently no filter UI element
#&gt; |variable 'EOSDT' is of class 'Date' which has currently no filter UI element
#&gt; |variable 'DTHDT' is of class 'Date' which has currently no filter UI element
#&gt; |variable 'LSTALVDT' is of class 'Date' which has currently no filter UI element
#&gt; ==== ADSL =======================
#&gt; STUDYID             has filter type choices   : AB12345
#&gt;                                  \--&gt; selected: 
#&gt; USUBJID             has filter type choices   : AB12345-BRA-1-id-105, AB12345-BRA-1-id-134, AB12345-BRA-1-id-141, AB12345-BRA-1-id-236, AB12345-BRA-1-id-265, ...
#&gt;                                  \--&gt; selected: 
#&gt; SUBJID              has filter type choices   : id-1, id-10, id-100, id-101, id-102, ...
#&gt;                                  \--&gt; selected: 
#&gt; SITEID              has filter type choices   : BRA-1, BRA-11, BRA-12, BRA-13, BRA-14, ...
#&gt;                                  \--&gt; selected: 
#&gt; AGE                 has filter type range     : 20 - 69
#&gt;                                  \--&gt; selected: 33 - 44
#&gt; SEX                 has filter type choices   : F, M
#&gt;                                  \--&gt; selected: M, F
#&gt; RACE                has filter type choices   : ASIAN, BLACK OR AFRICAN AMERICAN, WHITE, AMERICAN INDIAN OR ALASKA NATIVE, MULTIPLE, ...
#&gt;                                  \--&gt; selected: 
#&gt; COUNTRY             has filter type choices   : CHN, USA, BRA, PAK, NGA, ...
#&gt;                                  \--&gt; selected: 
#&gt; INVID               has filter type choices   : INV ID BRA-1, INV ID BRA-11, INV ID BRA-12, INV ID BRA-13, INV ID BRA-14, ...
#&gt;                                  \--&gt; selected: 
#&gt; INVNAM              has filter type choices   : Dr. BRA-1 Doe, Dr. BRA-11 Doe, Dr. BRA-12 Doe, Dr. BRA-13 Doe, Dr. BRA-14 Doe, ...
#&gt;                                  \--&gt; selected: 
#&gt; ARM                 has filter type choices   : A: Drug X, B: Placebo, C: Combination
#&gt;                                  \--&gt; selected: 
#&gt; ARMCD               has filter type choices   : ARM A, ARM B, ARM C
#&gt;                                  \--&gt; selected: 
#&gt; ACTARM              has filter type choices   : A: Drug X, B: Placebo, C: Combination
#&gt;                                  \--&gt; selected: 
#&gt; ACTARMCD            has filter type choices   : ARM A, ARM B, ARM C
#&gt;                                  \--&gt; selected: 
#&gt; REGION1             has filter type choices   : Africa, Asia, Eurasia, Europe, North America, ...
#&gt;                                  \--&gt; selected: 
#&gt; STRATA1             has filter type choices   : A, B, C
#&gt;                                  \--&gt; selected: 
#&gt; STRATA2             has filter type choices   : S1, S2
#&gt;                                  \--&gt; selected: 
#&gt; BMRKR1              has filter type range     : 0.165447463531243 - 21.3933676083323
#&gt;                                  \--&gt; selected: 
#&gt; BMRKR2              has filter type choices   : LOW, MEDIUM, HIGH
#&gt;                                  \--&gt; selected: 
#&gt; ITTFL               has filter type choices   : Y
#&gt;                                  \--&gt; selected: 
#&gt; SAFFL               has filter type choices   : Y
#&gt;                                  \--&gt; selected: 
#&gt; BMEASIFL            has filter type choices   : Y, N
#&gt;                                  \--&gt; selected: 
#&gt; BEP01FL             has filter type choices   : Y, N
#&gt;                                  \--&gt; selected: 
#&gt; RANDDT              has filter type unknown   : 
#&gt;                                  \--&gt; selected: 
#&gt; TRTSDTM             has filter type unknown   : 
#&gt;                                  \--&gt; selected: 
#&gt; TRTEDTM             has filter type unknown   : 
#&gt;                                  \--&gt; selected: 
#&gt; EOSSTT              has filter type choices   : COMPLETED, DISCONTINUED, ONGOING
#&gt;                                  \--&gt; selected: 
#&gt; EOSDT               has filter type unknown   : 
#&gt;                                  \--&gt; selected: 
#&gt; EOSDY               has filter type range     : 6 - 731
#&gt;                                  \--&gt; selected: 
#&gt; DCSREAS             has filter type choices   : ADVERSE EVENT, LACK OF EFFICACY, PHYSICIAN DECISION, PROTOCOL VIOLATION, WITHDRAWAL BY PARENT/GUARDIAN, ...
#&gt;                                  \--&gt; selected: 
#&gt; DTHDT               has filter type unknown   : 
#&gt;                                  \--&gt; selected: 
#&gt; LSTALVDT            has filter type unknown   : 
#&gt;                                  \--&gt; selected: 
#&gt; study_duration_secs has filter type choices   : 63113904
#&gt;                                  \--&gt; selected: 
#&gt; ===========================</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#details">Details</a></li>
      <li><a href="#methods">Methods</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by NEST, Adrian Waddell, Pawel Rucki, Dawid Kaledkowski, Sebastian Wolf, Maximilian Mordig, Bartosz Baranowski, Ondrej Slama, Nikolas Burkoff, Maciej Nasinski, Roche.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


