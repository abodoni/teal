<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Class to encapsulate filtered datasets — FilteredData • teal</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Class to encapsulate filtered datasets — FilteredData" />
<meta property="og:description" content="Class to encapsulate filtered datasets
Class to encapsulate filtered datasets" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">teal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/delayed_data_loading.html">Delayed Data Loading</a>
    </li>
    <li>
      <a href="../articles/developer_apps.html">Developer Apps</a>
    </li>
    <li>
      <a href="../articles/getting_started.html">Getting Started with Teal</a>
    </li>
    <li>
      <a href="../articles/teal_desiderata.html">Teal Desiderata</a>
    </li>
    <li>
      <a href="../articles/teal_design_and_implementation.html">Teal Design and Implementation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<!-- start_releases -->
<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
Other releases
<span class="caret"></span></a><ul class="dropdown-menu" role="menu">
   <li><a href="../../index.html">latest</a></li>
   <li><a href="../../pre-release/index.html">pre-release</a></li>
   <li><a href="../../v0.10.0/index.html">v0.10.0</a></li>
   <li><a href="../../v0.9.5/index.html">v0.9.5</a></li>
   <li><a href="../../v0.9.4/index.html">v0.9.4</a></li>
   <li><a href="../../v0.9.3/index.html">v0.9.3</a></li>
   <li><a href="../../v0.9.2/index.html">v0.9.2</a></li>
   <li><a href="../../v0.9.1/index.html">v0.9.1</a></li>
   <li><a href="../../v0.9.0/index.html">v0.9.0</a></li>
   <li><a href="../../v0.8.5/index.html">v0.8.5</a></li>
   <li><a href="../../v0.8.4/index.html">v0.8.4</a></li>
   <li><a href="../../v0.8.3/index.html">v0.8.3</a></li>
   <li><a href="../../v0.8.2/index.html">v0.8.2</a></li>
   <li><a href="../../v0.7.0/index.html">v0.7.0</a></li>
   <li><a href="../../v0.6.0/index.html">v0.6.0</a></li>
   <li><a href="../../v0.0.5/index.html">v0.0.5</a></li>
   <li><a href="../../v0.0.4/index.html">v0.0.4</a></li>
   <li><a href="../../v0.0.3/index.html">v0.0.3</a></li>
   <li><a href="../../v0.0.2/index.html">v0.0.2</a></li>
   <li><a href="../../v0.0.1/index.html">v0.0.1</a></li>
</ul></li>
<!-- end_releases -->
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.roche.com/NEST/teal">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Class to encapsulate filtered datasets</h1>
    
    <div class="hidden name"><code>FilteredData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Class to encapsulate filtered datasets</p>
<p>Class to encapsulate filtered datasets</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The main purpose of this class is to provide a collection of reactive datasets,
each of which can be filtered through the right filter panel of teal apps.
For each dataset, <code>get_filter_expr</code> returns the call to filter the dataset according
to the UI user selection.
Other classes then take care of actually merging together all the datasets.</p>
<p>This class is <code>ADSL</code>-centric in the sense that <code>ADSL</code> is required to apply the filters.
Every dataset, in addition to its own filter, is filtered to make sure that it only
contains keys present in <code>ADSL</code> (defaulting to <code>(USUBJID, STUDYID)</code>).
Once the <code>ADSL</code> dataset is set, the filters are applied.</p>
<p>The datasets are filtered lazily, i.e. only when requested / needed in the Shiny app.</p>
<p>By the design of the class (and <code>reactiveValues</code>), any dataname set through <code>set_data</code>
cannot be removed because other code may already depend on it. As a workaround, the
underlying data can be set to <code>NULL</code>.</p>
<p>The class currently supports variables of the following types within datasets:</p><ul>
<li><p><code>choices</code>: variable of type <code>factor</code>, e.g. <code>ADSL$COUNTRY</code>
zero or more options can be selected, when the variable is a factor</p></li>
<li><p><code>logical</code>: variable of type <code>logical</code>, e.g. <code>ADSL$TRT_FLAG</code>
exactly one option must be selected, <code>TRUE</code> or <code>FALSE</code></p></li>
<li><p><code>ranges</code>: variable of type <code>numeric</code>, e.g. <code>ADSL$AGE</code>
numerical range, a range within this range can be selected
Other variables cannot be filtered for.</p></li>
</ul>

<p>Common arguments are:</p><ol>
<li><p><code>filtered</code>: filtered dataset or not</p></li>
<li><p><code>dataname</code>: one of the datasets</p></li>
<li><p><code>varname</code>: one of the columns in a dataset</p></li>
</ol>

    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>FilteredData$new()</code></a></p></li>
<li><p><a href='#method-datanames'><code>FilteredData$datanames()</code></a></p></li>
<li><p><a href='#method-get_data'><code>FilteredData$get_data()</code></a></p></li>
<li><p><a href='#method-set_data'><code>FilteredData$set_data()</code></a></p></li>
<li><p><a href='#method-get_code'><code>FilteredData$get_code()</code></a></p></li>
<li><p><a href='#method-set_code'><code>FilteredData$set_code()</code></a></p></li>
<li><p><a href='#method-get_data_attr'><code>FilteredData$get_data_attr()</code></a></p></li>
<li><p><a href='#method-set_data_attr'><code>FilteredData$set_data_attr()</code></a></p></li>
<li><p><a href='#method-get_variable_labels'><code>FilteredData$get_variable_labels()</code></a></p></li>
<li><p><a href='#method-get_keys'><code>FilteredData$get_keys()</code></a></p></li>
<li><p><a href='#method-get_datalabel'><code>FilteredData$get_datalabel()</code></a></p></li>
<li><p><a href='#method-get_filter_info'><code>FilteredData$get_filter_info()</code></a></p></li>
<li><p><a href='#method-get_filter_type'><code>FilteredData$get_filter_type()</code></a></p></li>
<li><p><a href='#method-get_filter_state'><code>FilteredData$get_filter_state()</code></a></p></li>
<li><p><a href='#method-set_filter_state'><code>FilteredData$set_filter_state()</code></a></p></li>
<li><p><a href='#method-get_default_filter_state'><code>FilteredData$get_default_filter_state()</code></a></p></li>
<li><p><a href='#method-get_filter_expr'><code>FilteredData$get_filter_expr()</code></a></p></li>
<li><p><a href='#method-print'><code>FilteredData$print()</code></a></p></li>
<li><p><a href='#method-print_filter_info'><code>FilteredData$print_filter_info()</code></a></p></li>
<li><p><a href='#method-get_data_info'><code>FilteredData$get_data_info()</code></a></p></li>
<li><p><a href='#method-get_bookmark_state'><code>FilteredData$get_bookmark_state()</code></a></p></li>
<li><p><a href='#method-restore_state_from_bookmark'><code>FilteredData$restore_state_from_bookmark()</code></a></p></li>
<li><p><a href='#method-clone'><code>FilteredData$clone()</code></a></p></li>
</ul>
<p><hr>
<a id="method-new"></a></p><h3>Method <code>new()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>new</span>()</pre><p></div></p>

<h3>Details</h3>
<p>Initialize a FilteredData object</p>

<p><hr>
<a id="method-datanames"></a></p><h3>Method <code>datanames()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>datanames</span>()</pre><p></div></p>

<h3>Details</h3>
<p>Get datanames, ADSL appears first</p>

<h3>Returns</h3>
<p><code>character</code> vector of datanames</p>
<p><hr>
<a id="method-get_data"></a></p><h3>Method <code>get_data()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_data</span>(<span class='no'>dataname</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>filtered</code></dt><dd><p><code>logical</code> whether to return filtered or unfiltered dataset</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get filtered or unfiltered dataset</p>
<p>For <code>filtered = FALSE</code>, the original data set with
<code>set_data</code> is returned including all attributes.</p>

<p><hr>
<a id="method-set_data"></a></p><h3>Method <code>set_data()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>set_data</span>(<span class='no'>dataname</span>, <span class='no'>data</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset, without spaces</p></dd>

<dt><code>data</code></dt><dd><p><code>data.frame</code> data that corresponds to <code>dataname</code></p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Add data</p>
<p>Will also add the <code>md5</code> sum of the data.</p>
<p>Note: due to the nature of <code>reactiveValues()</code>, once a dataname
is added, it cannot be removed anymore because some code may depend
on it. You can try to achieve this by setting the data to NULL
and the observers must then know that NULL means that the dataset
was removed.</p>
<p>Any attributes attached to the data are kept in the unfiltered data.</p>

<h3>Returns</h3>
<p><code>self</code> object of this class</p>
<p><hr>
<a id="method-get_code"></a></p><h3>Method <code><a href='get_code.html'>get_code()</a></code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'><a href='get_code.html'>get_code</a></span>(<span class='kw'>dataname</span> <span class='kw'>=</span> <span class='no'>self</span>$<span class='fu'>datanames</span>())</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name(s) of dataset(s)</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get the R preprocessing code string that generates the unfiltered datasets</p>

<h3>Returns</h3>
<p><code>character</code> deparsed code</p>
<p><hr>
<a id="method-set_code"></a></p><h3>Method <code>set_code()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>set_code</span>(<span class='no'>code</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>code</code></dt><dd><p><code>CodeClass</code> preprocessing code that can be parsed to generate the
unfiltered datasets</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Set the R preprocessing code for single dataset</p>

<h3>Returns</h3>
<p><code>self</code></p>
<p><hr>
<a id="method-get_data_attr"></a></p><h3>Method <code>get_data_attr()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_data_attr</span>(<span class='no'>dataname</span>, <span class='no'>attr</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>attr</code></dt><dd><p><code>character</code> attribute to get from the data attributes of the dataset</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get data attribute for the dataset</p>
<p>sets and gets the data attribute on unfiltered data as it is never modified
as attributes</p>

<h3>Returns</h3>
<p>value of attribute, may be NULL if it does not exist</p>
<p><hr>
<a id="method-set_data_attr"></a></p><h3>Method <code>set_data_attr()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>set_data_attr</span>(<span class='no'>dataname</span>, <span class='no'>attr</span>, <span class='no'>value</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>attr</code></dt><dd><p>attribute to get from the data attributes of the dataset</p></dd>

<dt><code>value</code></dt><dd><p>value to set attribute to</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Set data attribute for the dataset</p>

<h3>Returns</h3>
<p><code>self</code> for chaining</p>
<p><hr>
<a id="method-get_variable_labels"></a></p><h3>Method <code><a href='get_variable_labels.html'>get_variable_labels()</a></code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'><a href='get_variable_labels.html'>get_variable_labels</a></span>(<span class='no'>dataname</span>, <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>variables</code></dt><dd><p>(<code>character</code> vector) variables to get labels for;
if <code>NULL</code>, for all variables in data</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get labels of variables in the data</p>
<p>Variables are the column names of the data.
Either, all labels must have been provided for all variables
in <code>set_data</code> or <code>NULL</code>.</p>

<h3>Returns</h3>
<p><code>character or NULL</code> variable labels, <code>NULL</code> if <code>column_labels</code>
attribute does not exist for the data
Get keys for the dataset</p>
<p><hr>
<a id="method-get_keys"></a></p><h3>Method <code>get_keys()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_keys</span>(<span class='no'>dataname</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p><code>character</code> keys of dataset
Get data label for the dataset</p>
<p>Useful to display in <code>Show R Code</code>.</p>
<p><hr>
<a id="method-get_datalabel"></a></p><h3>Method <code>get_datalabel()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_datalabel</span>(<span class='no'>dataname</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p><code>character</code> keys of dataset</p>
<p><hr>
<a id="method-get_filter_info"></a></p><h3>Method <code>get_filter_info()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_filter_info</span>(<span class='no'>dataname</span>, <span class='kw'>varname</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>include_unknown</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>varname</code></dt><dd><p><code>character</code> vector of variable names to include in the result.
Default: all variables in <code>dataname</code></p></dd>

<dt><code>include_unknown</code></dt><dd><p><code>logical</code> whether to include variables with unknown filter type.
Is ignored when <code>varname</code> is not <code>NULL</code>. Default: TRUE</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Return filter characteristics for a variable in a dataset
e.g. <code>range</code> for a <code>numeric</code> variable, <code>choices</code> for a
<code>factor</code> variable, <code>logical</code> for a <code>logical</code> variable.</p>
<p>This can be used to see filtering conditions of a variable or a vector of variables.
This method looks into <code>private$filter_infos</code> and returns a list of multiple <code>filter information</code> in case
<code>varname</code> is a list or a named list of a single <code>filter information</code> in case <code>varname</code> is a singular name.
The <code>include_unknown</code> argument is considered if and only when the <code>varname</code> is <code>NULL</code>.</p>

<h3>Returns</h3>
<p>a named list with filter information of <code>varname</code> variables.
If <code>include_unknown</code> is TRUE, then also return <code>filter information</code>
of variables with <code>filter information</code> of type unknown.</p>
<h3>Examples</h3>
<p><div class="r example copy"></p><pre><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>random.cdisc.data</span>)

<span class='no'>ADSL</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radsl.html'>radsl</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span>(<span class='no'>ADSL</span>, <span class='st'>"keys"</span>) <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='fu'><a href='get_cdisc_keys.html'>get_cdisc_keys</a></span>(<span class='st'>"ADSL"</span>)
<span class='no'>datasets</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='kw pkg'>teal</span><span class='kw ns'>:::</span><span class='no'>FilteredData</span>$<span class='fu'>new</span>()

<span class='co'># to avoid using isolate(), you can provide a default isolate context by calling</span>
<span class='co'># options(shiny.suppressMissingContextError = TRUE) #nolint</span>
<span class='co'># don't forget to deactivate this option at the end</span>
<span class='co'># options(shiny.suppressMissingContextError = FALSE) #nolint</span>

<span class='fu'>isolate</span>({
  <span class='no'>datasets</span>

  <span class='no'>datasets</span>$<span class='fu'>set_data</span>(<span class='st'>"ADSL"</span>, <span class='no'>ADSL</span>)
  <span class='no'>datasets</span>
  <span class='no'>datasets</span>$<span class='fu'>get_data_info</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='no'>datasets</span>$<span class='fu'>datanames</span>()
  <span class='co'># filters dataset to obtain information</span>
  <span class='no'>datasets</span>$<span class='fu'>get_data_info</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
  <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>)
  <span class='no'>df</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='no'>datasets</span>$<span class='fu'>get_data</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='co'># df</span>

  <span class='no'>datasets</span>$<span class='fu'>get_filter_type</span>(<span class='st'>"ADSL"</span>, <span class='st'>"SEX"</span>)
  <span class='no'>datasets</span>$<span class='fu'>set_filter_state</span>(<span class='st'>"ADSL"</span>, <span class='kw'>state</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='kw'>AGE</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>33</span>, <span class='fl'>44</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>),
    <span class='kw'>SEX</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>choices</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"M"</span>, <span class='st'>"F"</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  ))

  <span class='no'>infos</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>) <span class='co'># will return a named list of all active filters</span>
  <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span>(<span class='no'>infos</span>) <span class='co'># notice that names correspond to variable names</span>

  <span class='no'>single_info</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>, <span class='st'>"AGE"</span>) <span class='co'># will return a list of AGE filter infos</span>
  <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span>(<span class='no'>single_info</span>) <span class='co'># note that this contains filter informations, not variable names as names</span>

  <span class='no'>single_info2</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>, <span class='kw'>include_unknown</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
  <span class='no'>single_info2</span> <span class='co'># will include active filters of type unknown</span>

  <span class='no'>single_info3</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>,
    <span class='kw'>varname</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"AGE"</span>, <span class='st'>"SEX"</span>),
    <span class='kw'>include_unknown</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='no'>single_info3</span> <span class='co'># make note that include_unknown will be ignored, when varname is not NULL</span>
})</pre><p></div></p>

<p><hr>
<a id="method-get_filter_type"></a></p><h3>Method <code>get_filter_type()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_filter_type</span>(<span class='no'>dataname</span>, <span class='no'>varname</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>varname</code></dt><dd><p><code>character</code> column within the dataset,
must be provided</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>See <code>get_filter_info</code>, only returns filter type (<code>choices</code>, <code>range</code>, <code>logical</code>).</p>

<h3>Returns</h3>
<p><code>character</code> filter type</p>
<p><hr>
<a id="method-get_filter_state"></a></p><h3>Method <code>get_filter_state()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_filter_state</span>(<span class='no'>dataname</span>, <span class='kw'>varname</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>include_unknown</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>varname</code></dt><dd><p><code>character</code> column within the dataset;
if <code>NULL</code>, return all variables in a list</p></dd>

<dt><code>include_unknown</code></dt><dd><p><code>logical</code> whether to include the "unknown" type of variables
(TRUE) or not to include them (FALSE). Default: TRUE</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Returns active filter state for a dataset (or only a variable within it).</p>

<h3>Returns</h3>
<p><code>character vector</code> filter state or list of these</p>
<p><hr>
<a id="method-set_filter_state"></a></p><h3>Method <code>set_filter_state()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>set_filter_state</span>(<span class='no'>dataname</span>, <span class='no'>state</span>, <span class='kw'>remove_omitted</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset to set filter state for</p></dd>

<dt><code>state</code></dt><dd><p><code>named list</code> of new state to set; for each <code>varname</code>,
<code>state[[varname]]</code> is the new state to set for <code>varname</code></p></dd>

<dt><code>remove_omitted</code></dt><dd><p><code>logical</code> whether to remove the filters for the
variables that are not present in the named list <code>state</code></p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Set the filter state for a dataname</p>
<p>The state is only updated and triggers reactive behavior when it actually
changes.</p>
<p>To set a state for a single variable, you can write:
<code>set_filter_state(dataname, setNames(list(single_state), varname))</code>
or use the wrapper function <code>set_single_filter_state</code>.
To remove a filter for a variable, pass in <code>NULL</code>, e.g.
<code>state = list(SEX = NULL, ..)</code>.
To remove all filters for a dataset, call
<code>set_filter_state(dataname, state = list(), remove_omitted = FALSE)</code>.</p>

<h3>Returns</h3>
<p><code>logical</code> if the state for the <code>dataname</code> was changed</p>
<p><hr>
<a id="method-get_default_filter_state"></a></p><h3>Method <code>get_default_filter_state()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_default_filter_state</span>(<span class='no'>dataname</span>, <span class='no'>varname</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>varname</code></dt><dd><p><code>character</code> column within the dataset;
must be provided</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get the default filter state (useful for initial UI state)
This is different to NULL state which means no filter applied.
Instead, this filter is a sensible default, e.g. filter out NAs.
for numerics, full range; for factors, all choices etc.</p>

<h3>Returns</h3>
<p><code>character vector</code> default filter state for this variable</p>
<p><hr>
<a id="method-get_filter_expr"></a></p><h3>Method <code>get_filter_expr()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_filter_expr</span>(<span class='no'>dataname</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get the call to filter the dataset according to the filter state</p>
<p>This can be used for the <code>Show R Code</code> generation.</p>
<p>When the dataname is <code>ADSL</code>, it is simply the filtered <code>ADSL</code>.
Otherwise, it is the filtered dataset that only contains subjects which
are also in the filtered <code>ADSL</code>.</p>
<p>Note: The <code><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>dplyr::inner_join()</a></code> function in returned call will fail if the
corresponding dataset is NULL.</p>
<p>For the return type, note that <code><a href='https://rlang.r-lib.org/reference/is_expression.html'>rlang::is_expression</a></code> returns <code>TRUE</code> on the
return type, both for base R expressions and calls (single expression,
capturing a function call).</p>

<h3>Returns</h3>
<p><code>expression</code> to filter dataset (taking out patients not in <code>ADSL</code>)</p>
<p><hr>
<a id="method-print"></a></p><h3>Method <code><a href='https://rdrr.io/r/base/print.html'>print()</a></code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>...</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>...</code></dt><dd><p>unused arguments</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Print method</p>
<p>To obtain the default printing of R6 objects with method listing,
use <code><a href='https://rdrr.io/r/base/cat.html'>cat(format(x))</a></code>.</p>

<p><hr>
<a id="method-print_filter_info"></a></p><h3>Method <code>print_filter_info()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>print_filter_info</span>(
  <span class='no'>dataname</span>,
  <span class='kw'>filtered_vars_only</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>filtered_vars_only</code></dt><dd><p><code>logical</code> whether to only consider filtered
vars or unfiltered as well</p></dd>

<dt><code>variables</code></dt><dd><p>(<code>character</code> vector) variables to consider; if NULL, takes all</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Prints filter characteristics of each variable for a given dataset to the
console.</p>

<h3>Returns</h3>
<p><code>NULL</code>, only prints</p>
<p><hr>
<a id="method-get_data_info"></a></p><h3>Method <code>get_data_info()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_data_info</span>(<span class='no'>dataname</span>, <span class='no'>filtered</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>dataname</code></dt><dd><p><code>character</code> name of the dataset</p></dd>

<dt><code>filtered</code></dt><dd><p><code>logical</code> whether to obtain this info for the
filtered dataset</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Get info about dataname, e.g. dimensions and
number of patients (in long datasets different from ADSL,
a patient can occur in zero or more rows)</p>

<h3>Returns</h3>
<p>a list with names <code>dim, patients</code>
Returns the state to be bookmarked</p>
<p><code>md5</code> sums of <code>datasets</code>, <code>filter_states</code> and <code>preproc_code</code> are bookmarked.</p>
<p><hr>
<a id="method-get_bookmark_state"></a></p><h3>Method <code>get_bookmark_state()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>get_bookmark_state</span>()</pre><p></div></p>

<h3>Returns</h3>
<p>named list
Set this object from a bookmarked state</p>
<p>Only sets the filter state, does not set the data
and the preprocessing code.
Also checks the preprocessing code is identical if provided in the <code>state</code>.</p>
<p>Since this function is used from the end-user part, its error messages
are more verbose. We don't call the Shiny modals from here because this
class may be used outside of a Shiny app.</p>
<p><hr>
<a id="method-restore_state_from_bookmark"></a></p><h3>Method <code>restore_state_from_bookmark()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>restore_state_from_bookmark</span>(<span class='no'>state</span>, <span class='kw'>check_data_md5sums</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>state</code></dt><dd><p><code>list</code> containing fields <code>data_md5sums</code>, <code>filter_states</code>
and <code>preproc_code</code>.</p></dd>

<dt><code>check_data_md5sums</code></dt><dd><p><code>logical</code> whether to check that <code>md5sums</code> agree
for the data; may not make sense with randomly generated data per session</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='no'>FilteredData</span>$<span class='fu'>clone</span>(<span class='kw'>deep</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl'>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>random.cdisc.data</span>)

<span class='no'>ADSL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radsl.html'>radsl</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span>(<span class='no'>ADSL</span>, <span class='st'>"keys"</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='get_cdisc_keys.html'>get_cdisc_keys</a></span>(<span class='st'>"ADSL"</span>)
<span class='no'>datasets</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>teal</span><span class='kw ns'>:::</span><span class='no'>FilteredData</span>$<span class='fu'>new</span>()

<span class='co'># to avoid using isolate(), you can provide a default isolate context by calling</span>
<span class='co'># options(shiny.suppressMissingContextError = TRUE) #nolint</span>
<span class='co'># don't forget to deactivate this option at the end</span>
<span class='co'># options(shiny.suppressMissingContextError = FALSE) #nolint</span>

<span class='fu'>isolate</span>({
  <span class='no'>datasets</span>

  <span class='no'>datasets</span>$<span class='fu'>set_data</span>(<span class='st'>"ADSL"</span>, <span class='no'>ADSL</span>)
  <span class='no'>datasets</span>

  <span class='no'>datasets</span>$<span class='fu'>datanames</span>()
  <span class='no'>datasets</span>$<span class='fu'>get_data_info</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='co'># filters dataset to obtain information</span>
  <span class='no'>datasets</span>$<span class='fu'>get_data_info</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
  <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>)
  <span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>datasets</span>$<span class='fu'>get_data</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='co'># df</span>

  <span class='no'>datasets</span>$<span class='fu'>get_filter_type</span>(<span class='st'>"ADSL"</span>, <span class='st'>"SEX"</span>)
  <span class='no'>datasets</span>$<span class='fu'>set_filter_state</span>(<span class='st'>"ADSL"</span>, <span class='kw'>state</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='kw'>AGE</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>33</span>, <span class='fl'>44</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>),
    <span class='kw'>SEX</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>choices</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"M"</span>, <span class='st'>"F"</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  ))
  <span class='no'>datasets</span>
  <span class='no'>datasets</span>$<span class='fu'>get_filter_type</span>(<span class='st'>"ADSL"</span>, <span class='st'>"SEX"</span>)
  <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>)<span class='kw'>[[</span><span class='st'>"SEX"</span>]]$<span class='no'>type</span>

  <span class='co'># will fail because of invalid range</span>
  <span class='co'># datasets$set_filter_state("ADSL", list(</span>
  <span class='co'>#   AGE = list(range = c(3, 7), keep_na = FALSE)</span>
  <span class='co'># ))</span>
  <span class='no'>datasets</span>$<span class='fu'>set_filter_state</span>(<span class='st'>"ADSL"</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='kw'>AGE</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>33</span>, <span class='fl'>44</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  ))
  <span class='co'># wrapper functions</span>
  <span class='kw pkg'>teal</span><span class='kw ns'>:::</span><span class='fu'><a href='set_single_filter_state.html'>set_single_filter_state</a></span>(<span class='no'>datasets</span>, <span class='st'>"ADSL"</span>, <span class='st'>"AGE"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>35</span>, <span class='fl'>42</span>))
  <span class='kw pkg'>teal</span><span class='kw ns'>:::</span><span class='fu'><a href='set_single_filter_state.html'>set_single_filter_state</a></span>(
    <span class='no'>datasets</span>, <span class='st'>"ADSL"</span>, <span class='st'>"AGE"</span>,
    <span class='kw'>state</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>33</span>, <span class='fl'>44</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  )
  <span class='no'>datasets</span>$<span class='fu'>set_filter_state</span>(
    <span class='st'>"ADSL"</span>,
    <span class='kw'>state</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
      <span class='kw'>SEX</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>choices</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"M"</span>, <span class='st'>"F"</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
    )
  )
  <span class='no'>datasets</span>$<span class='fu'>get_filter_type</span>(<span class='st'>"ADSL"</span>, <span class='st'>"SEX"</span>)

  <span class='no'>datasets</span>$<span class='fu'>get_filter_state</span>(<span class='st'>"ADSL"</span>)

  <span class='no'>datasets</span>$<span class='fu'>print_filter_info</span>(<span class='st'>"ADSL"</span>)
})</div><div class='output co'>#&gt; |################################################# Refiltering dataset  ADSL
#&gt; ==== ADSL =======================
#&gt; STUDYID             has filter type choices   : AB12345
#&gt;                                  \--&gt; selected: 
#&gt; USUBJID             has filter type choices   : AB12345-BRA-1-id-105, AB12345-BRA-1-id-134, AB12345-BRA-1-id-141, AB12345-BRA-1-id-236, AB12345-BRA-1-id-265, ...
#&gt;                                  \--&gt; selected: 
#&gt; SUBJID              has filter type choices   : id-1, id-10, id-100, id-101, id-102, ...
#&gt;                                  \--&gt; selected: 
#&gt; SITEID              has filter type choices   : BRA-1, BRA-11, BRA-12, BRA-13, BRA-14, ...
#&gt;                                  \--&gt; selected: 
#&gt; AGE                 has filter type range     : 20 - 69
#&gt;                                  \--&gt; selected: 33 - 44
#&gt; SEX                 has filter type choices   : F, M
#&gt;                                  \--&gt; selected: M, F
#&gt; RACE                has filter type choices   : ASIAN, BLACK OR AFRICAN AMERICAN, WHITE, AMERICAN INDIAN OR ALASKA NATIVE, MULTIPLE, ...
#&gt;                                  \--&gt; selected: 
#&gt; COUNTRY             has filter type choices   : CHN, USA, BRA, PAK, NGA, ...
#&gt;                                  \--&gt; selected: 
#&gt; INVID               has filter type choices   : INV ID BRA-1, INV ID BRA-11, INV ID BRA-12, INV ID BRA-13, INV ID BRA-14, ...
#&gt;                                  \--&gt; selected: 
#&gt; INVNAM              has filter type choices   : Dr. BRA-1 Doe, Dr. BRA-11 Doe, Dr. BRA-12 Doe, Dr. BRA-13 Doe, Dr. BRA-14 Doe, ...
#&gt;                                  \--&gt; selected: 
#&gt; ARM                 has filter type choices   : A: Drug X, B: Placebo, C: Combination
#&gt;                                  \--&gt; selected: 
#&gt; ARMCD               has filter type choices   : ARM A, ARM B, ARM C
#&gt;                                  \--&gt; selected: 
#&gt; ACTARM              has filter type choices   : A: Drug X, B: Placebo, C: Combination
#&gt;                                  \--&gt; selected: 
#&gt; ACTARMCD            has filter type choices   : ARM A, ARM B, ARM C
#&gt;                                  \--&gt; selected: 
#&gt; REGION1             has filter type choices   : Africa, Asia, Eurasia, Europe, North America, ...
#&gt;                                  \--&gt; selected: 
#&gt; STRATA1             has filter type choices   : A, B, C
#&gt;                                  \--&gt; selected: 
#&gt; STRATA2             has filter type choices   : S1, S2
#&gt;                                  \--&gt; selected: 
#&gt; BMRKR1              has filter type range     : 0.165447463531243 - 21.3933676083323
#&gt;                                  \--&gt; selected: 
#&gt; BMRKR2              has filter type choices   : LOW, MEDIUM, HIGH
#&gt;                                  \--&gt; selected: 
#&gt; ITTFL               has filter type choices   : Y
#&gt;                                  \--&gt; selected: 
#&gt; SAFFL               has filter type choices   : Y
#&gt;                                  \--&gt; selected: 
#&gt; BMEASIFL            has filter type choices   : Y, N
#&gt;                                  \--&gt; selected: 
#&gt; BEP01FL             has filter type choices   : Y, N
#&gt;                                  \--&gt; selected: 
#&gt; RANDDT              has filter type date      : 2019-02-22 - 2021-02-14
#&gt;                                  \--&gt; selected: 
#&gt; TRTSDTM             has filter type date      : 2019-02-24 11:09:18 - 2021-02-17 14:42:27
#&gt;                                  \--&gt; selected: 
#&gt; TRTEDTM             has filter type date      : 2021-02-11 23:04:23 - 2023-02-18 02:20:51
#&gt;                                  \--&gt; selected: 
#&gt; EOSSTT              has filter type choices   : COMPLETED, DISCONTINUED, ONGOING
#&gt;                                  \--&gt; selected: 
#&gt; EOSDT               has filter type date      : 2021-02-11 - 2023-02-18
#&gt;                                  \--&gt; selected: 
#&gt; EOSDY               has filter type range     : 6 - 731
#&gt;                                  \--&gt; selected: 
#&gt; DCSREAS             has filter type choices   : ADVERSE EVENT, LACK OF EFFICACY, PHYSICIAN DECISION, PROTOCOL VIOLATION, WITHDRAWAL BY PARENT/GUARDIAN, ...
#&gt;                                  \--&gt; selected: 
#&gt; DTHDT               has filter type date      : 2021-02-11 - 2023-02-18
#&gt;                                  \--&gt; selected: 
#&gt; LSTALVDT            has filter type date      : 2021-02-22 - 2023-03-12
#&gt;                                  \--&gt; selected: 
#&gt; study_duration_secs has filter type choices   : 63113904
#&gt;                                  \--&gt; selected: 
#&gt; ===========================</div><div class='input'>
<span class='co'>## ------------------------------------------------</span>
<span class='co'>## Method `FilteredData$get_filter_info`</span>
<span class='co'>## ------------------------------------------------</span>

<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>random.cdisc.data</span>)

<span class='no'>ADSL</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/random.cdisc.data/man/radsl.html'>radsl</a></span>(<span class='kw'>cached</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span>(<span class='no'>ADSL</span>, <span class='st'>"keys"</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='get_cdisc_keys.html'>get_cdisc_keys</a></span>(<span class='st'>"ADSL"</span>)
<span class='no'>datasets</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>teal</span><span class='kw ns'>:::</span><span class='no'>FilteredData</span>$<span class='fu'>new</span>()

<span class='co'># to avoid using isolate(), you can provide a default isolate context by calling</span>
<span class='co'># options(shiny.suppressMissingContextError = TRUE) #nolint</span>
<span class='co'># don't forget to deactivate this option at the end</span>
<span class='co'># options(shiny.suppressMissingContextError = FALSE) #nolint</span>

<span class='fu'>isolate</span>({
  <span class='no'>datasets</span>

  <span class='no'>datasets</span>$<span class='fu'>set_data</span>(<span class='st'>"ADSL"</span>, <span class='no'>ADSL</span>)
  <span class='no'>datasets</span>
  <span class='no'>datasets</span>$<span class='fu'>get_data_info</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='no'>datasets</span>$<span class='fu'>datanames</span>()
  <span class='co'># filters dataset to obtain information</span>
  <span class='no'>datasets</span>$<span class='fu'>get_data_info</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
  <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>)
  <span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>datasets</span>$<span class='fu'>get_data</span>(<span class='st'>"ADSL"</span>, <span class='kw'>filtered</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='co'># df</span>

  <span class='no'>datasets</span>$<span class='fu'>get_filter_type</span>(<span class='st'>"ADSL"</span>, <span class='st'>"SEX"</span>)
  <span class='no'>datasets</span>$<span class='fu'>set_filter_state</span>(<span class='st'>"ADSL"</span>, <span class='kw'>state</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='kw'>AGE</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>33</span>, <span class='fl'>44</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>),
    <span class='kw'>SEX</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>choices</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"M"</span>, <span class='st'>"F"</span>), <span class='kw'>keep_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  ))

  <span class='no'>infos</span> <span class='kw'>&lt;-</span> <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>) <span class='co'># will return a named list of all active filters</span>
  <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span>(<span class='no'>infos</span>) <span class='co'># notice that names correspond to variable names</span>

  <span class='no'>single_info</span> <span class='kw'>&lt;-</span> <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>, <span class='st'>"AGE"</span>) <span class='co'># will return a list of AGE filter infos</span>
  <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span>(<span class='no'>single_info</span>) <span class='co'># note that this contains filter informations, not variable names as names</span>

  <span class='no'>single_info2</span> <span class='kw'>&lt;-</span> <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>, <span class='kw'>include_unknown</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
  <span class='no'>single_info2</span> <span class='co'># will include active filters of type unknown</span>

  <span class='no'>single_info3</span> <span class='kw'>&lt;-</span> <span class='no'>datasets</span>$<span class='fu'>get_filter_info</span>(<span class='st'>"ADSL"</span>,
    <span class='kw'>varname</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"AGE"</span>, <span class='st'>"SEX"</span>),
    <span class='kw'>include_unknown</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='no'>single_info3</span> <span class='co'># make note that include_unknown will be ignored, when varname is not NULL</span>
})</div><div class='output co'>#&gt; |################################################# Refiltering dataset  ADSL</div><div class='output co'>#&gt; $AGE
#&gt; $AGE$type
#&gt; [1] "range"
#&gt; 
#&gt; $AGE$label
#&gt; [1] "Age"
#&gt; 
#&gt; $AGE$range
#&gt; [1] 20 69
#&gt; 
#&gt; $AGE$histogram_data
#&gt;            x            y
#&gt; 1   13.94261 9.117225e-06
#&gt; 2   14.55993 2.321839e-05
#&gt; 3   15.17726 5.439041e-05
#&gt; 4   15.79458 1.174687e-04
#&gt; 5   16.41190 2.346172e-04
#&gt; 6   17.02922 4.351502e-04
#&gt; 7   17.64654 7.536781e-04
#&gt; 8   18.26386 1.227863e-03
#&gt; 9   18.88118 1.899402e-03
#&gt; 10  19.49850 2.815356e-03
#&gt; 11  20.11582 4.035965e-03
#&gt; 12  20.73314 5.635405e-03
#&gt; 13  21.35046 7.690577e-03
#&gt; 14  21.96779 1.025643e-02
#&gt; 15  22.58511 1.333701e-02
#&gt; 16  23.20243 1.686859e-02
#&gt; 17  23.81975 2.072756e-02
#&gt; 18  24.43707 2.476110e-02
#&gt; 19  25.05439 2.882359e-02
#&gt; 20  25.67171 3.279805e-02
#&gt; 21  26.28903 3.659320e-02
#&gt; 22  26.90635 4.013048e-02
#&gt; 23  27.52367 4.333371e-02
#&gt; 24  28.14100 4.613345e-02
#&gt; 25  28.75832 4.847642e-02
#&gt; 26  29.37564 5.032419e-02
#&gt; 27  29.99296 5.164218e-02
#&gt; 28  30.61028 5.239834e-02
#&gt; 29  31.22760 5.258938e-02
#&gt; 30  31.84492 5.228558e-02
#&gt; 31  32.46224 5.165638e-02
#&gt; 32  33.07956 5.094021e-02
#&gt; 33  33.69688 5.035932e-02
#&gt; 34  34.31420 5.001961e-02
#&gt; 35  34.93153 4.986149e-02
#&gt; 36  35.54885 4.969468e-02
#&gt; 37  36.16617 4.929268e-02
#&gt; 38  36.78349 4.849310e-02
#&gt; 39  37.40081 4.724777e-02
#&gt; 40  38.01813 4.560162e-02
#&gt; 41  38.63545 4.362576e-02
#&gt; 42  39.25277 4.135668e-02
#&gt; 43  39.87009 3.878472e-02
#&gt; 44  40.48741 3.589678e-02
#&gt; 45  41.10473 3.273844e-02
#&gt; 46  41.72206 2.945108e-02
#&gt; 47  42.33938 2.624860e-02
#&gt; 48  42.95670 2.335132e-02
#&gt; 49  43.57402 2.091440e-02
#&gt; 50  44.19134 1.898506e-02
#&gt; 51  44.80866 1.750354e-02
#&gt; 52  45.42598 1.633832e-02
#&gt; 53  46.04330 1.533383e-02
#&gt; 54  46.66062 1.435199e-02
#&gt; 55  47.27794 1.329741e-02
#&gt; 56  47.89527 1.212520e-02
#&gt; 57  48.51259 1.083516e-02
#&gt; 58  49.12991 9.460259e-03
#&gt; 59  49.74723 8.053976e-03
#&gt; 60  50.36455 6.680121e-03
#&gt; 61  50.98187 5.404770e-03
#&gt; 62  51.59919 4.286256e-03
#&gt; 63  52.21651 3.364286e-03
#&gt; 64  52.83383 2.653147e-03
#&gt; 65  53.45115 2.143430e-03
#&gt; 66  54.06847 1.810992e-03
#&gt; 67  54.68580 1.626298e-03
#&gt; 68  55.30312 1.557612e-03
#&gt; 69  55.92044 1.568024e-03
#&gt; 70  56.53776 1.612380e-03
#&gt; 71  57.15508 1.642427e-03
#&gt; 72  57.77240 1.620205e-03
#&gt; 73  58.38972 1.531670e-03
#&gt; 74  59.00704 1.391728e-03
#&gt; 75  59.62436 1.235834e-03
#&gt; 76  60.24168 1.102216e-03
#&gt; 77  60.85900 1.014455e-03
#&gt; 78  61.47633 9.731437e-04
#&gt; 79  62.09365 9.592634e-04
#&gt; 80  62.71097 9.455134e-04
#&gt; 81  63.32829 9.090432e-04
#&gt; 82  63.94561 8.403178e-04
#&gt; 83  64.56293 7.459863e-04
#&gt; 84  65.18025 6.446621e-04
#&gt; 85  65.79757 5.589640e-04
#&gt; 86  66.41489 5.060852e-04
#&gt; 87  67.03221 4.905017e-04
#&gt; 88  67.64954 5.019032e-04
#&gt; 89  68.26686 5.194932e-04
#&gt; 90  68.88418 5.208616e-04
#&gt; 91  69.50150 4.912473e-04
#&gt; 92  70.11882 4.287656e-04
#&gt; 93  70.73614 3.434570e-04
#&gt; 94  71.35346 2.515189e-04
#&gt; 95  71.97078 1.681267e-04
#&gt; 96  72.58810 1.024938e-04
#&gt; 97  73.20542 5.695910e-05
#&gt; 98  73.82274 2.884829e-05
#&gt; 99  74.44007 1.331316e-05
#&gt; 100 75.05739 5.597063e-06
#&gt; 
#&gt; $AGE$inf_count
#&gt; [1] 0
#&gt; 
#&gt; $AGE$is_integer
#&gt; [1] TRUE
#&gt; 
#&gt; $AGE$na_count
#&gt; [1] 0
#&gt; 
#&gt; 
#&gt; $SEX
#&gt; $SEX$type
#&gt; [1] "choices"
#&gt; 
#&gt; $SEX$label
#&gt; [1] "Sex"
#&gt; 
#&gt; $SEX$choices
#&gt; $SEX$choices$`F (231)`
#&gt; [1] "F"
#&gt; 
#&gt; $SEX$choices$`M (169)`
#&gt; [1] "M"
#&gt; 
#&gt; 
#&gt; $SEX$histogram_data
#&gt;   x   y
#&gt; 1 F 231
#&gt; 2 M 169
#&gt; 
#&gt; $SEX$na_count
#&gt; [1] 0
#&gt; 
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by NEST, Adrian Waddell, Pawel Rucki, Dawid Kaledkowski, Sebastian Wolf, Maximilian Mordig, Bartosz Baranowski, Ondrej Slama, Nikolas Burkoff, Maciej Nasinski, Roche.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


