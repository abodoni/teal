<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started with Teal • teal</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with Teal">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">teal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_connector_class.html">DataConnector Class</a>
    </li>
    <li>
      <a href="../articles/getting_started.html">Getting Started with Teal</a>
    </li>
    <li>
      <a href="../articles/teal_desiderata.html">Teal Desiderata</a>
    </li>
    <li>
      <a href="../articles/teal_design_and_implementation.html">Teal Design and Implementation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<!-- start_releases -->
<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
Other releases
<span class="caret"></span></a><ul class="dropdown-menu" role="menu">
   <li><a href="../../index.html">latest</a></li>
   <li><a href="../../pre-release/index.html">pre-release</a></li>
   <li><a href="../../v0.10.0/index.html">v0.10.0</a></li>
   <li><a href="../../v0.9.5/index.html">v0.9.5</a></li>
   <li><a href="../../v0.9.4/index.html">v0.9.4</a></li>
   <li><a href="../../v0.9.3/index.html">v0.9.3</a></li>
   <li><a href="../../v0.9.2/index.html">v0.9.2</a></li>
   <li><a href="../../v0.9.1/index.html">v0.9.1</a></li>
   <li><a href="../../v0.9.0/index.html">v0.9.0</a></li>
   <li><a href="../../v0.8.5/index.html">v0.8.5</a></li>
   <li><a href="../../v0.8.4/index.html">v0.8.4</a></li>
   <li><a href="../../v0.8.3/index.html">v0.8.3</a></li>
   <li><a href="../../v0.8.2/index.html">v0.8.2</a></li>
   <li><a href="../../v0.7.0/index.html">v0.7.0</a></li>
   <li><a href="../../v0.6.0/index.html">v0.6.0</a></li>
   <li><a href="../../v0.0.5/index.html">v0.0.5</a></li>
   <li><a href="../../v0.0.4/index.html">v0.0.4</a></li>
   <li><a href="../../v0.0.3/index.html">v0.0.3</a></li>
   <li><a href="../../v0.0.2/index.html">v0.0.2</a></li>
   <li><a href="../../v0.0.1/index.html">v0.0.1</a></li>
</ul></li>
<!-- end_releases -->
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.roche.com/NEST/teal">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Getting Started with Teal</h1>
                        <h4 class="author">Adrian Waddell</h4>
            
            <h4 class="date">2019-07-31</h4>
      
      
      <div class="hidden name"><code>getting_started.Rmd</code></div>

    </div>

    
    
<p><img src="images/teal.jpg" alt="Teal Duck" style="width: 100%;"></p>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p><em>teal</em> is a shiny based interactive exploration framework for analyzing clinical trials data. <code>teal</code> currently provides a dynamic filtering facility and different data viewers. <code>teal</code> shiny applications are built using standard <a href="https://shiny.rstudio.com/articles/modules.html" title="Modularizing Shiny app code">shiny modules</a>.</p>
<p>More information can be found on the <a href="http://go.roche.com/agile-R">agile-R website</a>.</p>
</div>
<div id="initializing-a-teal-application" class="section level2">
<h2 class="hasAnchor">
<a href="#initializing-a-teal-application" class="anchor"></a>Initializing A Teal application</h2>
<p>The workflow to create a shiny app using teal is as follows. The <code><a href="../reference/init.html">teal::init</a></code> function is used to create a shiny <code>server</code> and <code>ui</code> function which in turn can then be passed to the <code><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shiny::shinyApp</a></code> function to start a shiny application. The following code is sufficient for a <a href="https://shiny.rstudio.com/articles/single-file.html" title="Single-file Shiny apps">single file shiny app</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(teal)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(random.cdisc.data)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">ADSL &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/random.cdisc.data/man/radsl.html">radsl</a></span>()</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">ADRS &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/random.cdisc.data/man/radrs.html">radrs</a></span>(ADSL)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">ADTTE &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/random.cdisc.data/man/radtte.html">radtte</a></span>(ADSL)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">app &lt;-<span class="st"> </span>teal<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/teal/man/init.html">init</a></span>(</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">  <span class="dt">data =</span>  <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">ADSL =</span> ADSL, <span class="dt">ADRS =</span> ADRS, <span class="dt">ADTTE =</span> ADTTE),</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">  <span class="dt">modules =</span> <span class="kw"><a href="../reference/root_modules.html">root_modules</a></span>(</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">    <span class="kw"><a href="../reference/module.html">module</a></span>(</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">      <span class="st">"data source"</span>,</a>
<a class="sourceLine" id="cb1-13" data-line-number="13">      <span class="dt">server =</span> <span class="cf">function</span>(input, output, session, datasets) {},</a>
<a class="sourceLine" id="cb1-14" data-line-number="14">      <span class="dt">ui =</span> <span class="cf">function</span>(id) <span class="kw">div</span>(<span class="kw">p</span>(<span class="st">"information about data source"</span>)),</a>
<a class="sourceLine" id="cb1-15" data-line-number="15">      <span class="dt">filters =</span> <span class="ot">NULL</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16">    ),</a>
<a class="sourceLine" id="cb1-17" data-line-number="17">    <span class="kw">tm_data_table</span>(),</a>
<a class="sourceLine" id="cb1-18" data-line-number="18">    <span class="kw">tm_variable_browser</span>(),</a>
<a class="sourceLine" id="cb1-19" data-line-number="19">    <span class="kw"><a href="../reference/modules.html">modules</a></span>(</a>
<a class="sourceLine" id="cb1-20" data-line-number="20">      <span class="dt">label =</span> <span class="st">"analysis items"</span>,</a>
<a class="sourceLine" id="cb1-21" data-line-number="21">      <span class="kw">tm_table</span>(</a>
<a class="sourceLine" id="cb1-22" data-line-number="22">        <span class="dt">label =</span> <span class="st">"demographic table"</span>,</a>
<a class="sourceLine" id="cb1-23" data-line-number="23">        <span class="dt">dataname =</span> <span class="st">"ADSL"</span>,</a>
<a class="sourceLine" id="cb1-24" data-line-number="24">        <span class="dt">xvar =</span> <span class="st">"SEX"</span>,</a>
<a class="sourceLine" id="cb1-25" data-line-number="25">        <span class="dt">yvar =</span> <span class="st">"RACE"</span>,</a>
<a class="sourceLine" id="cb1-26" data-line-number="26">        <span class="dt">yvar_choices =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"RACE"</span>, <span class="st">"AGEGR"</span>, <span class="st">"REGION"</span>)</a>
<a class="sourceLine" id="cb1-27" data-line-number="27">      ),</a>
<a class="sourceLine" id="cb1-28" data-line-number="28">      <span class="kw">tm_scatterplot</span>(</a>
<a class="sourceLine" id="cb1-29" data-line-number="29">        <span class="dt">label =</span> <span class="st">"scatterplot"</span>,</a>
<a class="sourceLine" id="cb1-30" data-line-number="30">        <span class="dt">dataname =</span> <span class="st">"ADSL"</span>,</a>
<a class="sourceLine" id="cb1-31" data-line-number="31">        <span class="dt">xvar =</span> <span class="st">"AGE"</span>,</a>
<a class="sourceLine" id="cb1-32" data-line-number="32">        <span class="dt">yvar =</span> <span class="st">"BMRKR1"</span>,</a>
<a class="sourceLine" id="cb1-33" data-line-number="33">        <span class="dt">color_by =</span> <span class="st">"_none_"</span>,</a>
<a class="sourceLine" id="cb1-34" data-line-number="34">        <span class="dt">color_by_choices =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"_none_"</span>, <span class="st">"STUDYID"</span>)</a>
<a class="sourceLine" id="cb1-35" data-line-number="35">      ),</a>
<a class="sourceLine" id="cb1-36" data-line-number="36">      <span class="kw"><a href="../reference/module.html">module</a></span>(</a>
<a class="sourceLine" id="cb1-37" data-line-number="37">        <span class="dt">label =</span> <span class="st">"survival curves"</span>,</a>
<a class="sourceLine" id="cb1-38" data-line-number="38">        <span class="dt">server =</span> <span class="cf">function</span>(input, output, session, datasets) {},</a>
<a class="sourceLine" id="cb1-39" data-line-number="39">        <span class="dt">ui =</span> <span class="cf">function</span>(id) <span class="kw">div</span>(<span class="kw">p</span>(<span class="st">"Kaplan Meier Curve"</span>)),</a>
<a class="sourceLine" id="cb1-40" data-line-number="40">        <span class="dt">filters =</span> <span class="st">"ADTTE"</span></a>
<a class="sourceLine" id="cb1-41" data-line-number="41">      )</a>
<a class="sourceLine" id="cb1-42" data-line-number="42">    )</a>
<a class="sourceLine" id="cb1-43" data-line-number="43">  ),</a>
<a class="sourceLine" id="cb1-44" data-line-number="44">  <span class="dt">header =</span> tags<span class="op">$</span><span class="kw">h1</span>(<span class="st">"Sample App"</span>),</a>
<a class="sourceLine" id="cb1-45" data-line-number="45">  <span class="dt">footer =</span> tags<span class="op">$</span><span class="kw">p</span>(<span class="st">"Copyright 2017"</span>)</a>
<a class="sourceLine" id="cb1-46" data-line-number="46">)</a>
<a class="sourceLine" id="cb1-47" data-line-number="47"></a>
<a class="sourceLine" id="cb1-48" data-line-number="48"><span class="kw">shinyApp</span>(app<span class="op">$</span>ui, app<span class="op">$</span>server)</a></code></pre></div>
<p>This will produce the following web app (I switched to the data table tab):</p>
<p><img src="images/simple_setup.png" alt="Simple Example Of Teal" style="width: 100%;"></p>
<p>That is, we see a web app with a navigation bar at the top, the filter elements on the right, and the data table viewer in the center. The data table and the variable browser are two items that we provide with teal. Other items can be added using shiny modules. Note that if you would like to deploy the above app to a shiny server then place the code into an <code>app.R</code> file.</p>
<p>Note that each function in the teal package is documented. Run</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(teal)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/utils/help.html">help</a></span>(<span class="dt">package =</span> <span class="st">"teal"</span>)</a></code></pre></div>
<p>In the remainder of this section we will discuss all the elements that we specified to get to this application.</p>
<div id="general-layout" class="section level3">
<h3 class="hasAnchor">
<a href="#general-layout" class="anchor"></a>General Layout</h3>
<p>The following mockup shows an abstraction of the elements that are created in each teal application:</p>
<p><img src="images/teal_containers.png" alt="Simple Example Of Teal" style="width: 100%;"></p>
<p>These containers correspond to actual html block elements and we use shiny’s default layout manager <a href="http://getbootstrap.com">bootstrap 3</a> with a fluid-container. Web-app based on teal can control the following:</p>
<ul>
<li>analysis data</li>
<li>header and footer content</li>
<li>the <code>navbar</code> menu items that define the tab content</li>
<li>and the content in the “Tab Content” element by using <a href="https://shiny.rstudio.com/articles/modules.html">shiny modules</a>
</li>
<li>whether the filter panel is shown or not and what filters are shown</li>
</ul>
<p>And the following items can currently not be controlled:</p>
<ul>
<li>layout outside of the “Tab Contents” box</li>
<li>filter setup</li>
</ul>
</div>
<div id="data" class="section level3">
<h3 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h3>
<p>In the code listing above we specified the analysis data with a named list that is passed to the <code>data</code> argument of <code><a href="../reference/init.html">teal::init</a></code>. Because we filter every other data set with the ADSL filters (more on this below) you always need to specify the <code>ADSL</code> data with the <code>USUBJID</code> variable. Note that the dataset names are case sensitive.</p>
</div>
<div id="navigation-tabs-application-content-shiny-modules" class="section level3">
<h3 class="hasAnchor">
<a href="#navigation-tabs-application-content-shiny-modules" class="anchor"></a>Navigation Tabs, Application Content, Shiny Modules</h3>
<p>The second argument of <code><a href="../reference/init.html">teal::init</a></code> that we specified in the code listing above is the <code>modules</code> arguments. Modules define the elements displayed with tabs in the <em><code>Navbar</code></em> and their corresponding content in the <em>Tabs Content</em> box. A <code>modules</code> object can contain <code>module</code> and <code>modules</code> objects. For the app defined above this tree looks as follows:</p>
<p><img src="images/module_tree.png" alt="Navigation Tree" style="width: 100%;"></p>
<p>Note that we currently only allow a tree of depth 2 and we start the tree with the <code>root_modules</code> function which is a wrapper around <code>modules</code> that sets the <code>label</code> argument to <code>"root"</code>.</p>
<p>The <a href="https://shiny.rstudio.com/articles/modules.html" title="Modularizing Shiny app code">shiny modules</a> are specified in the <code>module</code> function with the <code>server</code> and <code>ui</code> argument. Both, <code>module</code> and <code>modules</code> are documented in the <code>teal</code> package, see <code><a href="../reference/module.html">?module</a></code> and <code><a href="../reference/modules.html">?modules</a></code>.</p>
</div>
</div>
<div id="accessing-the-analysis-data-in-shiny-modules" class="section level2">
<h2 class="hasAnchor">
<a href="#accessing-the-analysis-data-in-shiny-modules" class="anchor"></a>Accessing the Analysis Data in Shiny Modules</h2>
<p><code>teal</code> encapsulates all analysis datasets and provides the filtering facility. The filtered and unfiltered data is then made accessible via a <code>FilteredData</code> object that we usually assign to a <code>datasets</code> variable. The <code>FilteredData</code> class is based on the <a href="https://cran.r-project.org/web/packages/R6/vignettes/Introduction.html" title="Introduction to R6 classes">R6</a> object system and we initially did not intend to expose that object to the <code>teal</code> package user. Hence there are some public methods to the <code>FilteredData</code> class that are not safe to use. It’s best to only use the <code>get_data</code> method when writing <a href="https://shiny.rstudio.com/articles/modules.html" title="Modularizing Shiny app code">shiny modules</a>. The <code>get_data</code> method returns either a reactive or a static version of the filtered or unfiltered dataset of interest.</p>
<p>Assume we create the following <code>module</code> with the shiny modules</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/module.html">module</a></span>(</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  <span class="dt">label =</span> <span class="st">"Frequency Table"</span>,</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  <span class="dt">ui =</span> <span class="cf">function</span>(id) {</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">    ns &lt;-<span class="st"> </span><span class="kw">NS</span>(id)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">    <span class="kw">tableOutput</span>(<span class="kw">ns</span>(<span class="st">"freq_table"</span>))</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">  },</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">  <span class="dt">server =</span> <span class="cf">function</span>(input, output, session, datasets) {</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">    output<span class="op">$</span>freq_table &lt;-<span class="st"> </span><span class="kw">renderTable</span>({</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">      adsl &lt;-<span class="st"> </span>datasets<span class="op">$</span><span class="kw">get_data</span>(<span class="st">"adsl"</span>, <span class="dt">reactive =</span> <span class="ot">TRUE</span>, <span class="dt">filtered=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">      <span class="kw"><a href="https://rdrr.io/r/base/table.html">table</a></span>(adsl<span class="op">$</span>SEX)</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">    })</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">)</a></code></pre></div>
<p>This analysis item shows up as <em>Frequency Table</em> in the <code>navbar</code> and displays a table of the <code>ADSL.SEX</code> variable in the <em>Tab Contents</em> section of the app. The <code>ui</code> function requires the <code>id</code> argument, as defined in <a href="https://shiny.rstudio.com/articles/modules.html" title="Modularizing Shiny app code">shiny modules</a> and the <code>server</code> function requires the three arguments <code>input</code>, <code>output</code>, and <code>session</code>. The <code>dataset</code> argument is added to the <code>server</code> function call by <code>teal</code> based on the <code>server_args</code> argument list specified in the <code>module</code> function. The <code>server_args</code> expects a named list with additional arguments that should be passed to the server function. The list names (e.g. <code>datasets</code> in the above code) map to the argument names and the content is usually mapped one-to-one with the exception of some keywords such as <code>tead_datasets</code> which will be replaced by teal with the <code>FilteredData</code> object mentioned above. Note that when you extract a dataset from the <code>FilteredData</code> object (here associated with the <code>datasets</code> variable) then you should always use the argument <code>filtered=TRUE</code> in the <code>get_data</code> method to keep the application interaction coherent.</p>
</div>
<div id="filtering" class="section level2">
<h2 class="hasAnchor">
<a href="#filtering" class="anchor"></a>Filtering</h2>
<p>Currently we apply a specific filtering mechanism that is useful for clinical trials data and that requires an <code>ADSL</code> analysis dataset to be part of every <code>teal</code> app. That is, the filter framework provides lets the user dynamically specify which variables she/he wants to use for filtering (using ranges or categories). Teal then creates the <code>subset</code> code for each filter condition and links them with an elementwise logical <strong>AND</strong> operator (i.e. <code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code>). Further, all datasets other then <code>ADSL</code> will also be filtered with the remaining subjects in <code>ADSL</code> through the <code>ADSL.USUBJID</code> and <code>ADSL.STUDYID</code> variables. Hence, assume you have the following three filters</p>
<ul>
<li><code>ADSL.STUDYID %in% c('BP29392', 'WP29945')</code></li>
<li><code>ADSL.AGE &gt; 15 &amp; ADSL.AGE &lt; 35</code></li>
<li><code>ADRS.ADY &gt; 0 &amp; ADRS.ADY &lt; 500</code></li>
</ul>
<p>Then then <code>FilteredData</code> object will perform the following operations to obtain the filtered <code>ADRS</code> object in one of your modules:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">ADSL_FILTERED &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(ADSL, ADSL.STUDYID <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'BP29392'</span>, <span class="st">'WP29945'</span>) <span class="op">&amp;</span><span class="st"> </span>ADSL.AGE <span class="op">&gt;</span><span class="st"> </span><span class="dv">15</span> <span class="op">&amp;</span><span class="st"> </span>ADSL.AGE <span class="op">&lt;</span><span class="st"> </span><span class="dv">35</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">ADRS_FILTERED_ALONE &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(ADRS, ADRS.ADY <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>ADRS.ADY <span class="op">&lt;</span><span class="st"> </span><span class="dv">500</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">ADRS_FILTERED &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="dt">x =</span> ADSL_FILTERED,</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">                      <span class="dt">y =</span> ADRS_FILTERED_ALONE, </a>
<a class="sourceLine" id="cb4-6" data-line-number="6">                      <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"USUBJID"</span>, <span class="st">"STUDYID"</span>), <span class="dt">all.x =</span> <span class="ot">FALSE</span>, <span class="dt">all.y =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
</div>
<div id="additional-information" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-information" class="anchor"></a>Additional Information</h2>
<div id="defining-custom-header-and-footers" class="section level3">
<h3 class="hasAnchor">
<a href="#defining-custom-header-and-footers" class="anchor"></a>Defining Custom Header and Footers</h3>
<p>The <code><a href="../reference/init.html">teal::init</a></code> function also has the <code>header</code> and <code>footer</code> arguments that expects an object of class <code>shiny.tag</code> which can be created with the functions stored in the <code>tags</code> list (exported by shiny). So, a possible header could be defined as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">tags<span class="op">$</span><span class="kw">div</span>(tags<span class="op">$</span><span class="kw">h1</span>(<span class="st">"My New Analysis Web-app"</span>), tags<span class="op">$</span><span class="kw">p</span>(<span class="dt">class=</span><span class="st">"pull-left"</span>, <span class="st">"Logo"</span>))</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#initializing-a-teal-application">Initializing A Teal application</a></li>
      <li><a href="#accessing-the-analysis-data-in-shiny-modules">Accessing the Analysis Data in Shiny Modules</a></li>
      <li><a href="#filtering">Filtering</a></li>
      <li><a href="#additional-information">Additional Information</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by NEST, Adrian Waddell, Pawel Rucki, Dawid Kaledkowski, Sebastian Wolf, Maximilian Mordig, Bartosz Baranowski, Ondrej Slama, Roche.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
