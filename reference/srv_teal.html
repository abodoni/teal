<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Server function corresponding to teal — srv_teal • teal</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Server function corresponding to teal — srv_teal"><meta property="og:description" content="It evaluates the raw_data (delayed data mechanism) and creates the
datasets object that is shared across modules.
Once it is ready and non-NULL, the splash screen is replaced by the
main teal UI that depends on the data.
The currently active tab is tracked and the right filter panel
updates the displayed datasets to filter for according to the active datanames
of the tab.
The initially displayed filter states can be provided, bookmarked filter
states always take precedence over them."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">teal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.10.1.9017</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/teal.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/data_extract_spec.html">Customizing UI with `data_extract_spec`</a>
    </li>
    <li>
      <a href="../articles/delayed_data_loading.html">Delayed Data Loading</a>
    </li>
    <li>
      <a href="../articles/developer_apps.html">Developer Apps</a>
    </li>
    <li>
      <a href="../articles/merge.html">Merge code examples</a>
    </li>
    <li>
      <a href="../articles/teal_design_and_implementation.html">Teal Design and Implementation</a>
    </li>
    <li>
      <a href="../articles/teal_options.html">Modifying a Teal application with R options</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<!-- start_releases -->
<li class="dropdown">
	<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
Other releases
<span class="caret"></span></a><ul class="dropdown-menu" role="menu">
   <li><a href="../index.html">latest</a></li>
   <li><a href="..//index.html"></a></li>
</ul></li>
<!-- end_releases -->
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/insightsengineering/teal" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Server function corresponding to teal</h1>
    
    <div class="hidden name"><code>srv_teal.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>It evaluates the <code>raw_data</code> (delayed data mechanism) and creates the
<code>datasets</code> object that is shared across modules.
Once it is ready and non-<code>NULL</code>, the splash screen is replaced by the
main teal UI that depends on the data.
The currently active tab is tracked and the right filter panel
updates the displayed datasets to filter for according to the active datanames
of the tab.
The initially displayed filter states can be provided, bookmarked filter
states always take precedence over them.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">srv_teal</span><span class="op">(</span><span class="va">id</span>, <span class="va">modules</span>, <span class="va">raw_data</span>, filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>id</dt>
<dd><p>(<code>character</code>)<br>
module id to embed it, if provided,
the server function must be called with <code><a href="https://rdrr.io/pkg/shiny/man/moduleServer.html" class="external-link">shiny::moduleServer()</a></code>;
See the vignette for an example. However, <code><a href="ui_teal_with_splash.html">ui_teal_with_splash()</a></code>
is then preferred to this function.</p></dd>
<dt>modules</dt>
<dd><p>(<code>list</code> or <code>teal_modules</code>)<br>
nested list of <code>teal_modules</code> or <code>module</code> objects. See <code><a href="modules.html">modules()</a></code> and <code><a href="module.html">module()</a></code> for
more details.</p></dd>
<dt>raw_data</dt>
<dd><p>(<code>reactive</code>)<br>
returns the <code>TealData</code>, only evaluated once, <code>NULL</code> value is ignored</p></dd>
<dt>filter</dt>
<dd><p>(<code>list</code>)<br>
You can define filters that show when the app starts. List names should be
named according to datanames passed to the <code>data</code> argument.
In case of  data.frame` the list should be composed as follows:</p><div class="sourceCode"><pre><code>list(&lt;dataname1&gt; = list(&lt;varname1&gt; = ..., &lt;varname2&gt; = ...),
     &lt;dataname2&gt; = list(...),
     ...)

</code></pre></div>

<p>For example, filters for variable <code>Sepal.Length</code> in <code>iris</code> can be specified as
follows:</p><div class="sourceCode"><pre><code><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>iris <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Sepal.Length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.0</span>, <span class="fl">7.0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co"># or</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>iris <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Sepal.Length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.0</span>, <span class="fl">7.0</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>

<p>In case developer would like to include <code>NA</code> and <code>Inf</code> values in  the
filtered dataset.</p><div class="sourceCode"><pre><code><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.0</span>, <span class="fl">7.0</span><span class="op">)</span>, keep_na <span class="op">=</span> <span class="cn">TRUE</span>, keep_inf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.0</span>, <span class="fl">7.0</span><span class="op">)</span>, <span class="cn">NA</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></code></pre></div>

<p>To initialize with specific variable filter with all values on start, one
can use</p><div class="sourceCode"><pre><code><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/teal.slice/man/default_filter.html" class="external-link">default_filter</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>

<p><code>filter</code> should be set with respect to the class of the column:</p><ul><li><p><code>numeric</code>: <code>selected</code> should be a two elements vector defining the range
of the filter.</p></li>
<li><p><code>Date</code>: <code>selected</code> should be a two elements vector defining the date-range
of the filter</p></li>
<li><p><code>POSIXct</code>: <code>selected</code> should be a two elements vector defining the
<code>datetime</code> range of the filter</p></li>
<li><p><code>character</code> and <code>factor</code>: <code>selected</code> should be a vector of any length
defining initial values selected to filter.
<br><code>filter</code> for <code>MultiAssayExperiment</code> objects should be specified in slightly
different way. Since it contains patient data with list of experiments,
<code>filter</code> list should be created as follows:
<br></p></li>
</ul><div class="sourceCode"><pre><code>list(
  &lt;MAE dataname&gt; = list(
    subjects = list(&lt;column in colData&gt; = ..., &lt;column in colData&gt; = ...),
    &lt;experiment name&gt; = list(
      subset = list(&lt;column in rowData of experiment&gt; = ...,
                    &lt;column in rowData of experiment&gt; = ...),
      select = list(&lt;column in colData of experiment&gt; = ...,
                    &lt;column in colData of experiment&gt; = ...)
    )
  )
)
</code></pre></div>

<p><code>filter</code> is ignored if the app is restored from a bookmarked state.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>reactive</code> which returns the currently active module</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For more doc, see <code><a href="ui_teal.html">ui_teal()</a></code>.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by NEST, Adrian Waddell, Pawel Rucki, Dawid Kaledkowski,
Sebastian Wolf, Maximilian Mordig, Bartosz Baranowski, Ondrej Slama,
Nikolas Burkoff, Maciej Nasinski, Roche.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

